## PCI Bar空间的理解

​	Pci设备有很好的空配置性和易操作性，很大程度上要归功于其地址空间的可动态分配的特性。而动态分配地址空间就是依赖BAR(base address register)实现的。

​	BAR是PCI配置空间从0x10到0x24的6个register，用来定义PCI需要的配置空间大小，以及配置PCI设备占用的地址空间。每个PCI设备在BAR中描述自己需要占用多少地址空间，bios通过所有设备的这些信息构建一张address map，描述系统中资源的给配情况，然后合理地将地址空间分配给每个PCI设备。

​	如果要和CxlMemory结合起来的话，可能在这里BAR的作用就是将PCI设备的内存信息等其他信息告诉CPU，然后确定type3设备的内存地址如何并入全局地址空间中。